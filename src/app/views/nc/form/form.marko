<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="/estatico/css/libs/normalize.css"/>
    <link rel="stylesheet" href="/estatico/css/libs/materialize.css"/>
    <link rel="stylesheet" href="/estatico/css/libs/google-fonts.css"/>
    <link rel="stylesheet" href="/estatico/css/main.css"/>
    <title>Registro de Não Conformidades</title>
  </head>
  <body>
    <header class="container-header cabecalho"/>
    <main class="conteudoPrincipal">
      <div class="container">
        <h3 class="center-align">Registro de Não Conformidades</h3>
        <br/>
        <br/>
        <form id="formNC" action="/form" method="post">
          <if(data.registroNC._id)>
            <div>
              <input type="hidden" name="_method" value="PUT"/>
              <input type="hidden" name="id" value=data.registroNC._id/>
            </div>
          </if>
          <div class="row">
            <div class="form-group input-field  col s2">
              <label for="titulo" class="tooltipped" data-position="bottom" data-tooltip="Não se preocupe, seu CPF não irá constar nos dashboards!">CPF:</label>
              <input required type="text" id="titulo" name="cpfUser" value=data.registroNC.cpfUser placeholder="Digite seu CPF" class="form-control tooltipped" data-position="bottom" data-tooltip="Não se preocupe, seu CPF não irá constar nos dashboards!"/>
            </div>
            <div class="form-group input-field  col s4">
              <label for="titulo">Documento de referência:</label>
              <input type="text" id="titulo" name="docRef" value=data.registroNC.ssdocRef placeholder="(ex.: n° do Processo)" class="form-control docref chips chips-placeholder"/>
            </div>
            <div class="form-group input-field col s1">
              <a class="btn-floating btn-small waves-effect waves-light blue hoverable" href="">
                <i class="material-icons addDoc tooltipped" data-position="bottom" data-tooltip="Clique aqui para incluir mais de um processo.">add</i>
              </a>
            </div>
            <div class="areachip form-group input-field col s5"/>
          </div>
          <div class="row">
            <div class="form-group input-field col s4">
              <select required name="mpProcUser">
                <option class="form-group" value="" disabled selected>Clique para selecionar</option>
                <for|mp| of=data.mp>
                  <option class="form-group" value=data.registroNC.mprocUser>${mp.macroprocesso}</option>
                </for>
              </select>
              <label for="mProcUser">Qual o seu macroprocesso?</label>
            </div>
            <div class="form-group input-field col s4">
              <select required name="mProcOrigem">
                <option class="form-group" value="" disabled selected>Clique para selecionar</option>
                <for|mp| of=data.mp>
                  <option class="form-group" value=data.registroNC.mprocOrigem>${mp.macroprocesso}</option>
                </for>
              </select>
              <label for="mProcOrigem">Em qual macroprocesso a NC teve origem?</label>
            </div>
            <div class="form-group input-field col s4">
              <select name="equipeNC">
                <option class="form-group" value="" disabled selected>Clique para selecionar</option>
                <for|und| of=data.und>
                  <option class="form-group" value=data.und.Sigla>${und.Sigla}</option>
                </for>
              </select>
              <label for="equipeNC">Unidade onde ocorreu a Não Conformidade</label>
            </div>
          </div>
          <div class="row">
            <!-- <div class="input-field col s6">
              <i class="material-icons prefix">textsms</i>
              <input required name="descNC" type="text" id="autocomplete-input" class="autocomplete"/>
              <label for="autocomplete-input">Descrição da Não Conformidade</label>
            </div> -->
            <div class="form-group input-field col s6">
              <select name="descNC">
                <option class="form-group" value="" disabled selected>Clique para selecionar</option>
                <for|nconf| of=data.nconf>
                  <option class="form-group" value=data.nconf.nconformidade>${nconf.nconformidade}</option>
                </for>
              </select>
              <label for="descNC">Descrição da Não Conformidade</label>
            </div>
            <div class="input-field col s6">
              <i class="material-icons prefix">mode_edit</i>
              <textarea name="obsParticipante" placeholder="Detalhamento maior de como ocorreu a não conformidade." id="icon_prefix2" class="materialize-textarea">${data.registroNC.obs}</textarea>
              <label for="icon_prefix2">Comentários do participante (opcional):</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s3">
              <p>
                <label>Ação Imediata</label>
              </p>
              <p>
                <label>
                  <input name="acaoImediata" type="radio" value="Correção" checked class="hoverable"/>
                  <span>Correção</span>
                </label>
              </p>
              <p>
                <label>
                  <input name="acaoImediata" type="radio" value="Encaminhada para Correção" class="hoverable"/>
                  <span>NC encaminhada para correção</span>
                </label>
              </p>
            </div>
            <div class="input-field col s4">
              <input type="text" id="dataNC" name="dataNC" class="datepicker"/>
              <label for="dataNC">Quando ocorreu a NC?</label>
            </div>
            <div class="input-field col s4">
              <input type="text" id="EncCorNC" name="EncCorNC" class="datepicker"/>
              <label for="EncCorNC">Quando a NC foi encaminhada/Corrigida?</label>
            </div>
            <!-- <div class="col s5 offset-s11">
              <button class="btn-floating btn-large waves-effect waves-light green hoverable " type="submit">
                <i class="material-icons right-align">add</i>
              </button>
            </div> -->
            <div class="col s5 offset-s11">
              <a class="modal-trigger btn-floating btn-large waves-effect waves-light green hoverable" href="#modal1">
                <i class="material-icons">add</i>
              </a>
            </div>
          </div>
        </form>
      </div>
    </main>
    <footer class="page-footer rodape"/>
    <!--Modal Structure-->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <h4 class="hModal">Modal Header</h4>
        <p class="pModal">A bunch of text</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-red btn-flat">Cancela</a>
        <button class="btn waves-effect waves-light concorda" type="submit" name="action">
          Confirma <i class="material-icons right">send</i>
        </button>
      </div>
    </div>
    <div id="naoconfs" class="controle">
      <for|nconf| of=data.nconf>"${nconf.nconformidade}":null,</for>
    </div>
    <script src="/estatico/js/jquery-3.4.1.js"/>
    <script src="/estatico/js/materialize.js"/>
    <script src="/estatico/js/loadtemplate.js"/>
    <script src="/estatico/js/services/HttpService.js"/>
    <script src="/estatico/js/formcontrol.js"/>
  </body>
</html>
